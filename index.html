<!DOCTYPE html>
<html>
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-87F5F81PC8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-87F5F81PC8');
</script>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Seer</title>
      <link rel="icon"  href="favicon.ico">
      <link rel="stylesheet" type="text/css" href="css/style4.css">
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>

      <nav>
            <div class="user-info"  >
            <a href="Settings2.html" class="Logged-In" style="display: none;">
               <img src="img/user-icon.png" alt="User Icon">
               <span id="username" class="username"></span>
            </a></div>

            <a class="Logged-Out" style="display: none;" href="sign-in.html"><button>Sign in</button></a>
            <button class="Logged-In" style="display: none;" onClick="logout()">Log out</button>

      </nav>
      <section class="section-1">
            <img src="img/logo.png" class="logo">
            <form><br><br>
                  <div class="searchBox">

                  <input class="searchInput" id="search-input" type="text" name="" placeholder="Search">
                  <button class="searchButton" onClick="getInputValue()">
                      <i class="material-icons">
                          search
                      </i>
                  </button>
        </div>
                        
                        
                 
            </form>

      </section>
    
      <footer>
            <h4>United Kingdom</h4>
            <div class="links">
                  <div class="link-1">

                        <a href="About.html">About</a>
                        <a href="#">How Search works</a>
                  </div>
                  <div class="link-2">
                        <a href="#">Privacy</a>
                        <a href="#">Terms</a>
                        <a href="#">Settings</a>
                  </div>
            </div>
      </footer>



  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-firestore.js"></script>
  <script>


  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAHrpushe73DN11W-FBYX2-l0vnqJ0oCNw",
    authDomain: "tgesearchengine.firebaseapp.com",
    projectId: "tgesearchengine",
    storageBucket: "tgesearchengine.appspot.com",
    messagingSenderId: "576271302811",
    appId: "1:576271302811:web:89f94234fd8291b689463e",
    measurementId: "G-87F5F81PC8"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
    
    // make auth and firestore references
  const auth = firebase.auth();
  const db = firebase.firestore();
  db.settings({ timestampsInSnapshots: true });
  var loggedIn = true;




  </script>

  <script>

const setupUI = (user) => {
  const loggedInButtons = document.querySelectorAll('.Logged-In');
  const loggedOutButtons = document.querySelectorAll('.Logged-Out');

  if (user) {
    document.getElementById("username").textContent = user.email;
    loggedInButtons.forEach(button => {
      button.style.display = 'inline-block';
    });
    loggedOutButtons.forEach(button => {
      button.style.display = 'none';
    });
  } else {
    loggedInButtons.forEach(button => {
      button.style.display = 'none';
    });
    loggedOutButtons.forEach(button => {
      button.style.display = 'inline-block';
    });
  }
};
      
  auth.onAuthStateChanged(user =>{
      if(user){
         console.log(user.email);

         localStorage.setItem("uID", user.uid);
         setupUI(user);
         var loggedIn = true;


      }
      
      else{
            console.log("NO user logged in...");
            setupUI();
            var loggedIn = false;


      }
  })
          // signup
    async function logout(){
          

          
          
          
          
    }


      let logoutButton = document.querySelector("button[onClick='logout()']");
      logoutButton.addEventListener('click', async (event) => {
          event.preventDefault();

          
  
           
             auth.signOut().then(() => {
                console.log("Logged Out!");
                location.reload();


              }) 

              .catch((error) => {
                  const errorCode = error.code;
                  const errorMessage = error.message;
                  console.log(errorCode, errorMessage);

            });

         
                    
      });



  </script>
 <script src="js/Perform-Search-Index2.js"></script>

</body>
</html>